(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{144:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return d}));var a=n(2),o=n(9),r=(n(0),n(185)),i={title:"Social Authentication",sidebar_label:"Social Auth"},c={id:"auth/social",title:"Social Authentication",description:"Social authentication is a multi-step authentication flow, allowing you to sign a user into an account or link",source:"@site/../docs/auth/social.mdx",permalink:"/docs/auth/social",editUrl:"https://github.com/FirebaseExtended/flutterfire/edit/master/docs/../docs/auth/social.mdx",sidebar_label:"Social Auth"},l=[{value:"Google",id:"google",children:[]},{value:"Facebook",id:"facebook",children:[]}],s=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(r.b)("div",t)}},b=s("Tabs"),u=s("TabItem"),p={rightToc:l};function d(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"Social authentication is a multi-step authentication flow, allowing you to sign a user into an account or link\nthem with an existing one."),Object(r.b)("p",null,"Both native platforms and web support creating a credential which can then be passed to the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"!firebase_auth.FirebaseAuth.signInWithCredential"}),Object(r.b)("inlineCode",{parentName:"a"},"signInWithCredential")),"\nor ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"!firebase_auth.User.linkWithCredential"}),Object(r.b)("inlineCode",{parentName:"a"},"linkWithCredential"))," methods. Alternatively on web platforms, you can trigger the authentication process via\na popup or redirect."),Object(r.b)("h2",{id:"google"},"Google"),Object(r.b)("p",null,"Most configuration is already setup when using Google Sign-In with Firebase, however you need to ensure your machines\nSHA1 key has been configured for use with Android. You can see view how to generate the key on the\n",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"overview"}),"Getting Started")," documentation."),Object(r.b)("p",null,'Ensure the "Google" sign-in provider is enabled on the ',Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://console.firebase.google.com/project/_/authentication/providers"}),"Firebase Console"),"."),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"If your user signs in with Google, after having already manually registered an account, their authentication provider will automatically\nchange to Google, due to Firebase Authentications concept of trusted providers. You can find out more about\nthis ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://groups.google.com/g/firebase-talk/c/ms_NVQem_Cw/m/8g7BFk1IAAAJ"}),"here"),".")),Object(r.b)(b,{defaultValue:"native",values:[{label:"Native",value:"native"},{label:"Web",value:"web"}],mdxType:"Tabs"},Object(r.b)(u,{value:"native",mdxType:"TabItem"},Object(r.b)("p",null,"On native platforms, a 3rd party library is required to trigger the authentication flow."),Object(r.b)("p",null,"Install the official ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://pub.dev/packages/google_sign_in"}),Object(r.b)("inlineCode",{parentName:"a"},"google_sign_in"))," plugin:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-yaml",metastring:'title="pubspec.yaml"',title:'"pubspec.yaml"'}),'dependencies:\n  google_sign_in: "{{ external.google_sign_in }}"\n')),Object(r.b)("p",null,"Once installed, trigger the sign-in flow and create a new credential:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-dart"}),"import 'package:google_sign_in/google_sign_in.dart';\n\nFuture<UserCredential> signInWithGoogle() async {\n  // Trigger the authenticaion flow\n  final GoogleSignInAccount googleUser = await GoogleSignIn().signIn();\n\n  // Obtain the auth details from the request\n  final GoogleSignInAuthentication googleAuth = await googleUser.authentication;\n\n  // Create a new credential\n  final GoogleAuthCredential credential = GoogleAuthProvider.credential(\n    accessToken: googleAuth.accessToken,\n    idToken: googleAuth.idToken,\n  );\n\n  // Once signed in, return the UserCredential\n  return await FirebaseAuth.instance.signInWithCredential(credential);\n}\n"))),Object(r.b)(u,{value:"web",mdxType:"TabItem"},Object(r.b)("p",null,"On the web, the Firebase SDK provides support for automatically handling the authentication flow using your Firebase project. For example:"),Object(r.b)("p",null,"Create a Google auth provider, providing any additional ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://developers.google.com/identity/protocols/oauth2/scopes"}),"permission scope"),"\nyou wish to obtain from the user:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-dart"}),"GoogleAuthProvider googleProvider = GoogleAuthProvider();\n\ngoogleProvider.addScope('https://www.googleapis.com/auth/contacts.readonly');\ngoogleProvider.setCustomParameters({\n  'login_hint': 'user@example.com'\n});\n")),Object(r.b)("p",null,"Provide the credential to the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"!firebase_auth.FirebaseAuth.signInWithPopup"}),Object(r.b)("inlineCode",{parentName:"a"},"signInWithPopup"))," method. This will trigger a new\nwindow to appear prompting the user to sign-in to your project:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-dart"}),"Future<UserCredential> signInWithGoogle() async {\n  // Create a new provider\n  GoogleAuthProvider googleProvider = GoogleAuthProvider();\n\n  googleProvider.addScope('https://www.googleapis.com/auth/contacts.readonly');\n  googleProvider.setCustomParameters({\n    'login_hint': 'user@example.com'\n  });\n\n  // Once signed in, return the UserCredential\n  return await FirebaseAuth.instance.signInWithPopup(googleProvider);\n}\n")))),Object(r.b)("h2",{id:"facebook"},"Facebook"),Object(r.b)("p",null,"Before getting started setup your ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://developers.facebook.com/apps/"}),"Facebook Developer App")," and follow the setup process to enable Facebook Login."),Object(r.b)("p",null,'Ensure the "Facebook" sign-in provider is enabled on the ',Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://console.firebase.google.com/project/_/authentication/providers"}),"Firebase Console"),".\nwith the Facebook App ID and Secret set."),Object(r.b)(b,{defaultValue:"native",values:[{label:"Native",value:"native"},{label:"Web",value:"web"}],mdxType:"Tabs"},Object(r.b)(u,{value:"native",mdxType:"TabItem"},Object(r.b)("p",null,"On native platforms, a 3rd party library is required to both install the Facebook SDK and trigger the authentication flow."),Object(r.b)("p",null,"Install the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://pub.dev/packages/flutter_facebook_auth"}),Object(r.b)("inlineCode",{parentName:"a"},"flutter_facebook_auth"))," plugin:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-yaml",metastring:'title="pubspec.yaml"',title:'"pubspec.yaml"'}),'dependencies:\n  flutter_facebook_auth: "{{ external.flutter_facebook_auth }}"\n')),Object(r.b)("p",null,"You will need to follow the steps in the plugin documentation to ensure that both the Android & iOS Facebook SDKs have been initialized\ncorrectly. Once complete, trigger the sign-in flow, create a Facebook credential and sign the user in:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-dart"}),"import 'package:flutter_facebook_auth/flutter_facebook_auth.dart';\n\nFuture<UserCredential> signInWithFacebook() async {\n  // Trigger the sign-in flow\n  final LoginResult result = await FacebookAuth.instance.login();\n\n  // Create a credential from the access token\n  final FacebookAuthCredential facebookAuthCredential =\n    FacebookAuthProvider.credential(result.accessToken.token);\n\n  // Once signed in, return the UserCredential\n  return await FirebaseAuth.instance.signInWithCredential(facebookAuthCredential);\n}\n"))),Object(r.b)(u,{value:"web",mdxType:"TabItem"},Object(r.b)("p",null,"On the web, the Firebase SDK provides support for automatically handling the authentication flow using the\nFacebook application details provided on the Firebase console. For example:"),Object(r.b)("p",null,"Create a Facebook provider, providing any additional ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://developers.facebook.com/docs/facebook-login/permissions/"}),"permission scope"),"\nyou wish to obtain from the user:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-dart"}),"FacebookAuthProvider facebookProvider = FacebookAuthProvider();\n\nfacebookProvider.addScope('email');\nfacebookProvider.setCustomParameters({\n  'display': 'popup',\n});\n")),Object(r.b)("p",null,"Provide the credential to the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"!firebase_auth.FirebaseAuth.signInWithPopup"}),Object(r.b)("inlineCode",{parentName:"a"},"signInWithPopup"))," method. This will trigger a new\nwindow to appear prompting the user to sign-in to your Facebook application:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-dart"}),"Future<UserCredential> signInWithFacebook() async {\n  // Create a new provider\n  FacebookAuthProvider facebookProvider = FacebookAuthProvider();\n\n  facebookProvider.addScope('email');\n  facebookProvider.setCustomParameters({\n    'display': 'popup',\n  });\n\n  // Once signed in, return the UserCredential\n  return await FirebaseAuth.instance.signInWithPopup(facebookProvider);\n}\n")))))}d.isMDXComponent=!0},185:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return g}));var a=n(0),o=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=o.a.createContext({}),b=function(e){var t=o.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},u=function(e){var t=b(e.components);return o.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=b(n),d=a,g=u["".concat(i,".").concat(d)]||u[d]||p[d]||r;return n?o.a.createElement(g,c(c({ref:t},s),{},{components:n})):o.a.createElement(g,c({ref:t},s))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=d;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var s=2;s<r;s++)i[s]=n[s];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);